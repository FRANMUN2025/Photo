<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Private Photo Gallery</title>
<style>
body{font-family:Arial,sans-serif;background:#111;color:white;text-align:center;padding:50px;}
input,button{padding:10px;margin:5px;border-radius:6px;border:none;}
button{background:#ff2d55;color:white;cursor:pointer;}
a{color:#0af;text-decoration:none;}
a:hover{text-decoration:underline;}
</style>
</head>
<body>

<h2>Welcome to Atef's Private Photo Gallery</h2>

<div id="loginDiv">
  <input type="text" id="username" placeholder="Enter your name">
  <input type="password" id="password" placeholder="Enter password">
  <button onclick="login()">Login</button>
  <br><br>
  <button onclick="noPassword()">No password? Request access</button>
  <br><br>
  <button onclick="adminLoginPrompt()">I'm the Admin</button>
</div>

<div id="albumsDiv" style="display:none;">
  <h3>Available Albums</h3>
  <ul id="albumsList"></ul>
  <button onclick="logout()">Logout</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// ðŸ”¹ Firebase Config Ø§Ù„ØµØ­ÙŠØ­
const firebaseConfig = {
  apiKey: "AIzaSyDj2taqmuxvbUlLlwCV0DIp-x6FdwLAoE0",
  authDomain: "privategallery-e307b.firebaseapp.com",
  projectId: "privategallery-e307b",
  storageBucket: "privategallery-e307b.firebasestorage.app",
  messagingSenderId: "1028748741349",
  appId: "1:1028748741349:web:320660e8bfe36b7d87e20c",
  measurementId: "G-M5GCFL16Z4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let currentUser = null;

// Login function
function login(){
  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value.trim();
  if(!u||!p){alert("Enter username and password");return;}
  db.collection("users").doc(u).get().then(doc=>{
    if(doc.exists && doc.data().password===p && doc.data().approved){
      currentUser = u;
      showAlbums();
    } else { alert("Wrong username/password or not approved"); }
  });
}

// No password request
function noPassword(){
  const name = prompt("Enter your name for request:");
  if(!name) return;
  db.collection("requests").doc(name).set({approved:false})
    .then(()=>alert(`Thanks for your request! Atef will review it and we will contact you.`));
}

// Admin login prompt
function adminLoginPrompt(){
  const pass = prompt("Enter admin password:");
  if(pass === "swiftly"){ // ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø£Ø¯Ù…Ù†
    window.location.href = "admin.html";
  } else {
    alert("ØªØ­Ø´Ø±Ø´ Ø®Ø´ÙˆÙ…Ùƒ Ø¨ÙƒÙ„Ø´ÙŠ!!"); // Ø±Ø³Ø§Ù„Ø© Ø¯Ø±Ø§Ù…ÙŠØ©
  }
}

// Show albums
function showAlbums(){
  document.getElementById("loginDiv").style.display="none";
  document.getElementById("albumsDiv").style.display="block";
  const list = document.getElementById("albumsList");
  list.innerHTML="";
  db.collection("driveLinks").get().then(snapshot=>{
    snapshot.forEach(doc=>{
      const li = document.createElement("li");
      li.innerHTML=`<a href="${doc.data().url}" target="_blank">${doc.data().name}</a>`;
      list.appendChild(li);
    });
  });
}

// Logout
function logout(){
  currentUser = null;
  document.getElementById("albumsDiv").style.display="none";
  document.getElementById("loginDiv").style.display="block";
}
</script>

</body>
</html>
